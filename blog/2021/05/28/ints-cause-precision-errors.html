<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Cool RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Cool Atom Feed"><title data-react-helmet="true">Ints cause precision errors | Cool</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://coollibs.github.io//blog/2021/05/28/ints-cause-precision-errors"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Ints cause precision errors | Cool"><meta data-react-helmet="true" name="description" content="After a lot of trouble and bugs, I have come to the conclusion that you sould use floats most of the time."><meta data-react-helmet="true" property="og:description" content="After a lot of trouble and bugs, I have come to the conclusion that you sould use floats most of the time."><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2021-05-28T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://julesfouchy.github.io/"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://coollibs.github.io//blog/2021/05/28/ints-cause-precision-errors"><link data-react-helmet="true" rel="alternate" href="https://coollibs.github.io//blog/2021/05/28/ints-cause-precision-errors" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://coollibs.github.io//blog/2021/05/28/ints-cause-precision-errors" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.53548bc0.css">
<link rel="preload" href="/assets/js/runtime~main.a605198e.js" as="script">
<link rel="preload" href="/assets/js/main.80192a89.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon-32x32.png" alt="Cool&#x27;s Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/favicon-32x32.png" alt="Cool&#x27;s Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title"></b></a><a class="navbar__item navbar__link" href="/tutorials">Tutorials</a><a class="navbar__item navbar__link" href="/lab">Lab</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/contribute">Contribute</a><a class="navbar__item navbar__link" href="/learn">Learn</a><a class="navbar__item navbar__link" href="/about">About</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/CoolLibs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_a9qW thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_uKok margin-bottom--md">All posts</div><ul class="sidebarItemList_Kvuv"><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2022/04/29/scripting">How I implemented scripting in two hours</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2021/05/28/doing-better-than-cpp-references">Doing better than C++&#x27;s references (&amp;)</a></li><li class="sidebarItem_CF0Q"><a aria-current="page" class="sidebarItemLink_miNk sidebarItemLinkActive_RRTD" href="/blog/2021/05/28/ints-cause-precision-errors">Ints cause precision errors</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2021/05/28/the-dear-imgui-model">Ints cause precision errors</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2021/05/28/unit-type-system">Unit Type-System</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/2021/05/26/hijacking-the-dereference-operators">Hijacking the Dereference Operators</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_rzP5" itemprop="headline">Ints cause precision errors</h1><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2021-05-28T00:00:00.000Z" itemprop="datePublished">May 28, 2021</time> Â· <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://julesfouchy.github.io/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_o0gy" src="https://github.com/julesfouchy.png" alt="Jules Fouchy"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://julesfouchy.github.io/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jules Fouchy</span></a></div><small class="avatar__subtitle" itemprop="description">Cool developer &amp; cool developer</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>After a lot of trouble and bugs, I have come to the conclusion that you sould use floats most of the time.</p><p>The reason is simple : when you are doing maths, it is rare that the logic of your calculations will only output integers.</p><p>Integers are good for one thing : absolutely perfect 100% exactness. This properly is rarely required ; the only case I typically encounter is indexing into an array. But even though they are good at representing <em>some</em> numbers exactly, they are very bad at doing calculations in general because they need to <em>round</em> to the nearest integer. And in most cases I much rather have 3 / 2 = 1.5000000000001 than 3 / 2 = 1 ; this second calculation is really not what you want in 99% of the cases, except if you are specifically dealing with an integer reasoning. And, let me reiterate it, there is almost no problem or domain model were the only sensible values are integers. Most of the time we want the middle of 1 and 4 to be 2.5, not 2.</p><p>One common misconception is that, when positionning shapes in space, since the coordinates are expressed in pixels, people tend to use integer to represent them. But this is wrong, and I realized it as I was doing a fractal.</p><p>Why is it so tilted ? Because I am constantly rounding my position to the nearest integer as I trace the fractal, and the errors accumulate to some significant amounts over time.
The rounding to an integer should be done at the last moment, when rendering. Before that we want to be as exact as possible about are actual position in space, and integers are absolutely not fit for that job.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2021/05/28/doing-better-than-cpp-references"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Doing better than C++&#x27;s references (&amp;)</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2021/05/28/the-dear-imgui-model"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Ints cause precision errors</div></a></div></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Our projects</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/CoolLibs/Lab" target="_blank" rel="noopener noreferrer" class="footer__link-item">CoolLab</a></li><li class="footer__item"><a href="https://github.com/CoolLibs/Demo" target="_blank" rel="noopener noreferrer" class="footer__link-item">CoolDemo</a></li></ul></div><div class="col footer__col"><div class="footer__title">Raise an issue!</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/CoolLibs/Cool/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ask a question</a></li><li class="footer__item"><a href="https://github.com/CoolLibs/Cool/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Give us feedback</a></li><li class="footer__item"><a href="https://github.com/CoolLibs/home/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Report a mistake</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/CoolLibs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022. Built with <a href="https://docusaurus.io/">Docusaurus</a>.
                    <div>Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>
                    </div></div></div></footer></div>
<script src="/assets/js/runtime~main.a605198e.js"></script>
<script src="/assets/js/main.80192a89.js"></script>
</body>
</html>